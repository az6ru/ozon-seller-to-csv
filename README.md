# Ozon Seller to CSV Parser

Асинхронный парсер для сбора данных о товарах продавцов Ozon с сохранением в CSV формат.

## Особенности

- Асинхронный сбор данных с использованием httpx
- Обход антибот-системы через настройки из curl-запроса
- Сохранение результатов в CSV с информацией о ценах, категориях и товарах
- Поддержка многостраничного парсинга
- Автоматическое определение категорий магазина

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/az6ru/ozon-seller-to-csv.git
cd ozon-seller-to-csv
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Скопируйте файл с настройками:
```bash
cp docs/example/settings.txt .
```

## Настройка

1. Откройте любой магазин продавца на Ozon в браузере
2. Откройте DevTools (F12) и перейдите во вкладку Network
3. Найдите любой запрос к API (например, с параметром page)
4. Правой кнопкой по запросу -> Copy -> Copy as cURL
5. Вставьте содержимое в файл `settings.txt`

## Использование

```bash
python main.py
```

После запуска введите URL магазина в формате:
```
https://www.ozon.ru/seller/webmarket-150120/products/?miniapp=seller_150120
```

Результаты парсинга будут сохранены в папке `reports` в формате CSV.

## Структура проекта

```
ozon_parser/
├── main.py                # Основной скрипт
├── requests_handler.py    # Обработчик HTTP-запросов
├── common.py             # Общие функции
├── errors.py            # Обработка ошибок
├── settings.txt         # Настройки запросов
└── reports/            # Папка с результатами
```

## Формат данных

CSV файл содержит следующие колонки:
- shop - название или ID магазина
- datetime - дата и время сбора данных
- price_reg - регулярная цена
- price_promo - акционная цена
- article - артикул товара
- name - название товара
- category_path - категория товара

## Лицензия

MIT